(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1493:()=>{},2474:()=>{},3335:()=>{},3562:()=>{},3754:()=>{},4785:()=>{},4791:()=>{},5698:()=>{},8220:(e,s,a)=>{Promise.resolve().then(a.bind(a,9382))},8712:()=>{},9382:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>L});var t=a(5155),i=a(2115);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=function(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return s.filter((e,s,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===s).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,i.forwardRef)((e,s)=>{let{color:a="currentColor",size:t=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:h,...m}=e;return(0,i.createElement)("svg",{ref:s,...n,width:t,height:t,stroke:a,strokeWidth:c?24*Number(l)/Number(t):l,className:r("lucide",o),...m},[...h.map(e=>{let[s,a]=e;return(0,i.createElement)(s,a)}),...Array.isArray(d)?d:[d]])}),o=(e,s)=>{let a=(0,i.forwardRef)((a,t)=>{let{className:n,...o}=a;return(0,i.createElement)(c,{ref:t,iconNode:s,className:r(`lucide-${l(e)}`,n),...o})});return a.displayName=`${e}`,a},d=o("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),h=o("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),m=o("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),u=o("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),g=o("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),x=o("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]),j=o("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),p=o("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),N=o("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),f=o("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),v=o("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function w(e){let{locationName:s,onImageSelect:a,className:l=""}=e,[r,n]=(0,i.useState)(!0),[c,o]=(0,i.useState)(null),[d,h]=(0,i.useState)(""),[m,g]=(0,i.useState)([]),[x,p]=(0,i.useState)(!1),w=(0,i.useRef)(null),y=(0,i.useRef)(null),b=(0,i.useRef)(null),k=(0,i.useRef)(null),$=(0,i.useRef)(null);(0,i.useEffect)(()=>{s&&h(`${s} Kerala tourism`)},[s]);let S=async e=>{if(e.trim()){p(!0),o(null);try{let s=`https://commons.wikimedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(e)}+filetype:bitmap|drawing&srnamespace=6&format=json&origin=*&srlimit=20`,a=await fetch(s);if(!a.ok)throw Error(`Search API error: ${a.status}`);let t=await a.json();if(!t.query||!t.query.search){g([]),o("No images found. Try a different search term.");return}let i=(await Promise.all(t.query.search.map(async e=>{e.title.replace("File:","");let s=`https://commons.wikimedia.org/w/api.php?action=query&titles=${encodeURIComponent(e.title)}&prop=imageinfo&iiprop=url|size&format=json&origin=*`;try{let a=await fetch(s),t=(await a.json()).query.pages,i=Object.keys(t)[0];if(t[i].imageinfo&&t[i].imageinfo.length>0){let s=t[i].imageinfo[0];return{title:e.title,url:s.url,thumbUrl:s.url,width:s.width,height:s.height,snippet:e.snippet}}return null}catch(e){return console.error("Error fetching image info:",e),null}}))).filter(e=>null!==e);g(i),0===i.length&&o("No images found. Try a different search term.")}catch(e){console.error("Search error:",e),o("Error performing search. Please try again.")}finally{p(!1)}}},C=e=>{e?.preventDefault(),S(d)};(0,i.useEffect)(()=>{if(d&&!x){let e=setTimeout(()=>{S(d)},500);return()=>clearTimeout(e)}},[d]);let I=e=>{a&&a(e)};return(0,i.useEffect)(()=>{n(!1)},[]),(0,t.jsxs)("div",{className:`image-search-sidebar ${l}`,children:[(0,t.jsx)("div",{className:"image-search-header",children:(0,t.jsxs)("h3",{className:"image-search-title",children:[(0,t.jsx)(u,{className:"image-search-icon"}),s?`${s} ചിത്രങ്ങൾ`:"ടൂറിസ്റ്റ് സ്ഥലങ്ങളുടെ ചിത്രങ്ങൾ"]})}),(0,t.jsx)("form",{ref:y,onSubmit:C,className:"image-search-form",children:(0,t.jsxs)("div",{className:"search-input-wrapper",children:[(0,t.jsx)("input",{ref:b,type:"text",value:d,onChange:e=>h(e.target.value),placeholder:"ചിത്രങ്ങൾ തിരയുക...",className:"search-input",disabled:x}),(0,t.jsx)("button",{ref:k,type:"submit",className:"search-button",disabled:x||!d.trim(),"aria-label":"Search",children:x?(0,t.jsx)(N,{className:"animate-spin"}):(0,t.jsx)(j,{})})]})}),c&&(0,t.jsxs)("div",{className:"image-search-error",children:[(0,t.jsx)(f,{className:"error-icon"}),(0,t.jsx)("p",{children:c}),(0,t.jsxs)("button",{onClick:C,className:"retry-button",children:[(0,t.jsx)(v,{className:"retry-icon"}),"വീണ്ടും ശ്രമിക്കുക"]})]}),r&&(0,t.jsxs)("div",{className:"search-loading",children:[(0,t.jsx)(N,{className:"search-loading-spinner animate-spin"}),(0,t.jsx)("p",{children:"തിരയൽ എഞ്ചിൻ ലോഡ് ചെയ്യുന്നു..."})]}),x&&(0,t.jsxs)("div",{className:"search-loading",children:[(0,t.jsx)(N,{className:"search-loading-spinner animate-spin"}),(0,t.jsx)("p",{children:"ചിത്രങ്ങൾ തിരയുന്നു..."})]}),(0,t.jsx)("div",{className:"search-results-container",ref:w,children:(0,t.jsx)("div",{className:"search-results-grid",ref:$,children:m.length>0&&!x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"search-results-count",children:[m.length," ചിത്രങ്ങൾ കണ്ടെത്തി"]}),m.map((e,s)=>(0,t.jsxs)("div",{className:"search-result-item",children:[(0,t.jsx)("div",{className:"search-result-image-container",children:(0,t.jsx)("img",{src:e.thumbUrl||"/placeholder.svg",alt:e.title,className:"search-result-image",onClick:()=>I(e.url),loading:"lazy"})}),(0,t.jsx)("div",{className:"search-result-title",title:e.title,children:e.title.replace("File:","")})]},s))]})})}),(0,t.jsx)("div",{className:"image-search-footer",children:(0,t.jsx)("p",{className:"image-search-attribution",children:"ചിത്രങ്ങൾ: വിക്കിമീഡിയ കോമൺസ്"})})]})}function y(e){let{location:s,onClose:a,userLocation:l,onImageSelect:r}=e,[n,c]=(0,i.useState)("info"),[o,h]=(0,i.useState)(null),[j,N]=(0,i.useState)(!1),[f,v]=(0,i.useState)(!1),y=(0,i.useRef)(!0);(0,i.useEffect)(()=>()=>{y.current=!1},[]),(0,i.useEffect)(()=>{s&&s.imageUrl?h(s.imageUrl):h(`/placeholder.svg?height=400&width=800&text=${encodeURIComponent(s.name)}`)},[s]);let b=e=>{if(!e)return`/placeholder.svg?height=400&width=800&text=${encodeURIComponent(s.name)}`;let a=e.toLowerCase();if(a.includes("temple")||a.includes("religion"))return"/placeholder.svg?height=400&width=800&text=Temple";if(a.includes("beach")||a.includes("water"))return"/placeholder.svg?height=400&width=800&text=Beach";if(a.includes("mosque"))return"/placeholder.svg?height=400&width=800&text=Mosque";if(a.includes("museum")||a.includes("culture"))return"/placeholder.svg?height=400&width=800&text=Museum";if(a.includes("waterfall"))return"/placeholder.svg?height=400&width=800&text=Waterfall";else if(a.includes("hill")||a.includes("mountain"))return"/placeholder.svg?height=400&width=800&text=Hill";else if(a.includes("backwater")||a.includes("lake"))return"/placeholder.svg?height=400&width=800&text=Backwater";else if(a.includes("fort")||a.includes("historic"))return"/placeholder.svg?height=400&width=800&text=Historic+Site";else if(a.includes("palace"))return"/placeholder.svg?height=400&width=800&text=Palace";else if(a.includes("wildlife")||a.includes("sanctuary"))return"/placeholder.svg?height=400&width=800&text=Wildlife";return`/placeholder.svg?height=400&width=800&text=${encodeURIComponent(s.name)}`};return s?(0,t.jsx)("div",{className:"modal-overlay",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,t.jsxs)("div",{className:"modal-container",children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h2",{children:s.name}),(0,t.jsx)("button",{className:"close-button",onClick:a,children:(0,t.jsx)(g,{className:"icon-small"})})]}),(0,t.jsxs)("div",{className:"modal-tabs",children:[(0,t.jsxs)("button",{className:`tab-button ${"info"===n?"active":""}`,onClick:()=>c("info"),children:[(0,t.jsx)(m,{className:"tab-icon"}),"വിവരങ്ങൾ"]}),(0,t.jsxs)("button",{className:`tab-button ${"images"===n?"active":""}`,onClick:()=>c("images"),children:[(0,t.jsx)(u,{className:"tab-icon"}),"ചിത്രങ്ങൾ"]})]}),(0,t.jsxs)("div",{className:"modal-content",children:["info"===n&&(0,t.jsxs)("div",{className:"info-tab",children:[(0,t.jsxs)("div",{className:"location-image-container",children:[!j&&(0,t.jsx)("div",{className:"image-loading-placeholder"}),o?(0,t.jsx)("img",{src:o||"/placeholder.svg",alt:s.name,className:`location-image ${j?"loaded":""}`,onLoad:()=>N(!0),onError:()=>{v(!0),h(b(s.categories&&s.categories.length>0?s.categories[0]:null)),N(!0)},loading:"lazy",width:"800",height:"400"}):f?(0,t.jsxs)("div",{className:"image-error-container",children:[(0,t.jsx)(x,{className:"image-error-icon"}),(0,t.jsx)("p",{children:"ചിത്രം ലഭ്യമല്ല"})]}):null]}),(0,t.jsxs)("div",{className:"location-details",children:[(0,t.jsxs)("div",{className:"detail-item",children:[(0,t.jsx)(d,{className:"detail-icon"}),(0,t.jsx)("p",{children:s.address})]}),s.distance&&(0,t.jsxs)("div",{className:"detail-item",children:[(0,t.jsx)(p,{className:"detail-icon"}),(0,t.jsx)("p",{children:s.distance>=1e3?`${(s.distance/1e3).toFixed(1)} കി.മീ.`:`${Math.round(s.distance)} മീറ്റർ`})]}),(0,t.jsx)("div",{className:"location-description",children:(0,t.jsx)("p",{children:s.description})}),s.categories&&s.categories.length>0&&(0,t.jsx)("div",{className:"category-badges",children:s.categories.map(e=>(0,t.jsx)("span",{className:"category-badge",children:e},e))})]}),(0,t.jsx)("div",{className:"action-buttons",children:(0,t.jsxs)("button",{className:"view-images-button",onClick:()=>c("images"),children:[(0,t.jsx)(u,{className:"button-icon"}),"ചിത്രങ്ങൾ കാണുക"]})})]}),"images"===n&&(0,t.jsxs)("div",{className:"images-tab",children:[(0,t.jsxs)("div",{className:"current-image-container",children:[(0,t.jsx)("h4",{children:"നിലവിലെ ചിത്രം"}),o?(0,t.jsx)("img",{src:o||"/placeholder.svg",alt:s.name,className:"current-location-image",loading:"lazy",width:"400",height:"200"}):(0,t.jsxs)("div",{className:"no-image-placeholder",children:[(0,t.jsx)(x,{className:"no-image-icon"}),(0,t.jsx)("p",{children:"ചിത്രം ലഭ്യമല്ല"})]})]}),(0,t.jsx)(w,{locationName:s.name,onImageSelect:e=>{e&&(h(e),N(!0),v(!1),r&&r(e))}})]})]})]})}):null}function b(e){let{location:s,onGetDirections:a,showDirectionsButton:l,onViewMore:r,onImageSearch:n}=e,[c,o]=(0,i.useState)(!1),[h,m]=(0,i.useState)(null),[u,g]=(0,i.useState)(!1),[N,f]=(0,i.useState)(!1),{name:v,description:w,distance:b,address:k,categories:$}=s,S=b>=1e3?`${(b/1e3).toFixed(1)} കി.മീ.`:`${Math.round(b)} മീറ്റർ`;(0,i.useEffect)(()=>{if(s.imageUrl){m(s.imageUrl);return}m(C(s.categories&&s.categories.length>0?s.categories[0]:null))},[s]);let C=e=>{if(!e)return`/placeholder.svg?height=192&width=384&text=${encodeURIComponent(s.name)}`;let a=e.toLowerCase();if(a.includes("temple")||a.includes("religion"))return"/placeholder.svg?height=192&width=384&text=Temple";if(a.includes("beach")||a.includes("water"))return"/placeholder.svg?height=192&width=384&text=Beach";if(a.includes("mosque"))return"/placeholder.svg?height=192&width=384&text=Mosque";if(a.includes("museum")||a.includes("culture"))return"/placeholder.svg?height=192&width=384&text=Museum";if(a.includes("waterfall"))return"/placeholder.svg?height=192&width=384&text=Waterfall";else if(a.includes("hill")||a.includes("mountain"))return"/placeholder.svg?height=192&width=384&text=Hill";else if(a.includes("backwater")||a.includes("lake"))return"/placeholder.svg?height=192&width=384&text=Backwater";else if(a.includes("fort")||a.includes("historic"))return"/placeholder.svg?height=192&width=384&text=Historic+Site";else if(a.includes("palace"))return"/placeholder.svg?height=192&width=384&text=Palace";else if(a.includes("wildlife")||a.includes("sanctuary"))return"/placeholder.svg?height=192&width=384&text=Wildlife";return`/placeholder.svg?height=192&width=384&text=${encodeURIComponent(s.name)}`};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"location-card",children:[(0,t.jsxs)("div",{className:"card-image-container",children:[!u&&(0,t.jsx)("div",{className:"image-loading-placeholder"}),h?(0,t.jsx)("img",{src:h||"/placeholder.svg",alt:v,className:`standard-image ${u?"loaded":""}`,onError:()=>{console.log("Image failed to load:",s.name),f(!0),m(C(s.categories&&s.categories.length>0?s.categories[0]:null)),g(!0)},onLoad:()=>{g(!0),f(!1)},loading:"lazy",width:"384",height:"192"}):N?(0,t.jsxs)("div",{className:"image-error-container",children:[(0,t.jsx)(x,{className:"image-error-icon"}),(0,t.jsx)("p",{children:"ചിത്രം ലഭ്യമല്ല"})]}):null,n&&(0,t.jsx)("button",{className:"image-search-button",onClick:e=>{e.stopPropagation(),n&&n(s.name)},title:"ചിത്രങ്ങൾ തിരയുക","aria-label":"Search for images",children:(0,t.jsx)(j,{className:"image-search-icon"})})]}),(0,t.jsxs)("div",{className:"card-header",children:[(0,t.jsx)("h3",{className:"card-title",children:v}),(0,t.jsxs)("div",{className:"card-address",children:[(0,t.jsx)(d,{className:"icon-small"}),k]})]}),(0,t.jsxs)("div",{className:"card-content",children:[(0,t.jsx)("p",{className:"card-description",children:w}),$&&$.length>0&&(0,t.jsxs)("div",{className:"category-badges",children:[$.slice(0,3).map(e=>(0,t.jsx)("span",{className:"category-badge",children:e},e)),$.length>3&&(0,t.jsxs)("span",{className:"category-badge",children:["+",$.length-3]})]})]}),(0,t.jsxs)("div",{className:"card-footer",children:[(0,t.jsxs)("div",{className:"distance-indicator",children:[(0,t.jsx)(p,{className:"icon-small"}),(0,t.jsx)("span",{children:S})]}),(0,t.jsx)("div",{className:"card-actions",children:l?(0,t.jsxs)("button",{className:"directions-button",onClick:()=>a(s),"aria-label":"Get directions",children:[(0,t.jsx)(p,{className:"icon-small"}),"വഴി കാണിക്കുക"]}):(0,t.jsx)("button",{className:"view-more-button",onClick:()=>{r?r(s):o(!0)},"aria-label":"View more details",children:"കൂടുതൽ കാണുക"})})]})]}),c&&(0,t.jsx)(y,{location:{...s,imageUrl:h},onClose:()=>o(!1),userLocation:null,onImageSelect:e=>{e&&(m(e),g(!0),f(!1))}})]})}a(4785),a(3754),a(3562);let k=o("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a(4791);let $=[{name:"തിരുവനന്തപുരം",englishName:"Thiruvananthapuram",lat:8.5241,lon:76.9366},{name:"കൊല്ലം",englishName:"Kollam",lat:8.8932,lon:76.6141},{name:"പത്തനംതിട്ട",englishName:"Pathanamthitta",lat:9.2648,lon:76.787},{name:"ആലപ്പുഴ",englishName:"Alappuzha",lat:9.4981,lon:76.3388},{name:"കോട്ടയം",englishName:"Kottayam",lat:9.5916,lon:76.5222},{name:"ഇടുക്കി",englishName:"Idukki",lat:9.9189,lon:77.1025},{name:"എറണാകുളം",englishName:"Ernakulam",lat:9.9816,lon:76.2999},{name:"തൃശ്ശൂർ",englishName:"Thrissur",lat:10.5276,lon:76.2144},{name:"പാലക്കാട്",englishName:"Palakkad",lat:10.7867,lon:76.6548},{name:"മലപ്പുറം",englishName:"Malappuram",lat:11.051,lon:76.0711},{name:"കോഴിക്കോട്",englishName:"Kozhikode",lat:11.2588,lon:75.7804},{name:"വയനാട്",englishName:"Wayanad",lat:11.6854,lon:76.132},{name:"കണ്ണൂർ",englishName:"Kannur",lat:11.8745,lon:75.3704},{name:"കാസർഗോഡ്",englishName:"Kasaragod",lat:12.4996,lon:74.9869}];function S(e){let{onSelectDistrict:s,selectedDistrict:a}=e,[l,r]=(0,i.useState)(!1),[n,c]=(0,i.useState)(""),[o,h]=(0,i.useState)($);(0,i.useEffect)(()=>{n?h($.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.englishName.toLowerCase().includes(n.toLowerCase()))):h($)},[n]);let m=e=>{s(e),r(!1),c("")};return(0,t.jsxs)("div",{className:"district-selector-container",children:[(0,t.jsx)("div",{className:"selector-label",children:"ജില്ല തിരഞ്ഞെടുക്കുക:"}),(0,t.jsxs)("div",{className:"district-dropdown",children:[(0,t.jsxs)("button",{className:"district-dropdown-button",onClick:()=>r(!l),type:"button",children:[a?(0,t.jsxs)("span",{className:"selected-district",children:[(0,t.jsx)(d,{className:"district-icon"}),a.name]}):(0,t.jsx)("span",{className:"placeholder-text",children:"ജില്ല തിരഞ്ഞെടുക്കുക"}),(0,t.jsx)(k,{className:"dropdown-icon"})]}),l&&(0,t.jsxs)("div",{className:"district-dropdown-content",children:[(0,t.jsx)("div",{className:"district-search",children:(0,t.jsx)("input",{type:"text",placeholder:"ജില്ല തിരയുക...",value:n,onChange:e=>c(e.target.value),className:"district-search-input"})}),(0,t.jsxs)("div",{className:"districts-list",children:[o.map(e=>(0,t.jsxs)("div",{className:`district-item ${a?.englishName===e.englishName?"selected":""}`,onClick:()=>m(e),children:[(0,t.jsx)(d,{className:"district-icon"}),(0,t.jsx)("span",{children:e.name}),(0,t.jsxs)("span",{className:"district-english-name",children:["(",e.englishName,")"]})]},e.englishName)),0===o.length&&(0,t.jsx)("div",{className:"no-districts-found",children:"ഫലങ്ങളൊന്നും കണ്ടെത്തിയില്ല"})]})]})]})]})}function C(e){let{onSearch:s,isSearching:a,onDistrictSelect:l=()=>{},onRadiusChange:r=()=>{},initialRadius:n=20}=e,[c,o]=(0,i.useState)(""),[h,m]=(0,i.useState)(!1),[u,g]=(0,i.useState)(null),[x,p]=(0,i.useState)(n),N=["തിരുവനന്തപുരം","കൊല്ലം","പത്തനംതിട്ട","ആലപ്പുഴ","കോട്ടയം","ഇടുക്കി","എറണാകുളം","കൊച്ചി","തൃശ്ശൂർ","പാലക്കാട്","മലപ്പുറം","കോഴിക്കോട്","വയനാട്","കണ്ണൂർ","കാസർഗോഡ്","മുന്നാർ","കുമളി","തേക്കടി","വർക്കല","കോവളം","കുമരകം","വാഗമൺ","പൊന്മുടി","അട്ടപ്പാടി","സൈലന്റ് വാലി","ആറന്മുള","ഗുരുവായൂർ","ബേക്കൽ","കൊടുങ്ങല്ലൂർ","ചാലക്കുടി"];(0,i.useEffect)(()=>{p(n)},[n]);let f=e=>{o(e),s(e,x),m(!1)};return(0,t.jsx)("div",{className:"search-container",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c.trim()?(m(!1),s(c,x)):u&&l(u,x)},className:"search-form",children:[(0,t.jsxs)("div",{className:"search-options",children:[(0,t.jsx)(S,{onSelectDistrict:e=>{g(e),o(""),l(e,x)},selectedDistrict:u}),(0,t.jsxs)("div",{className:"radius-selector",children:[(0,t.jsxs)("label",{htmlFor:"radius-slider",className:"radius-label",children:["തിരയൽ റേഡിയസ്: ",(0,t.jsxs)("span",{className:"radius-value",children:[x," കി.മീ."]})]}),(0,t.jsx)("input",{type:"range",id:"radius-slider",min:"5",max:"50",step:"5",value:x,onChange:e=>{let s=Number.parseInt(e.target.value);p(s),r(s)},className:"radius-slider"}),(0,t.jsxs)("div",{className:"radius-markers",children:[(0,t.jsx)("span",{children:"5"}),(0,t.jsx)("span",{children:"20"}),(0,t.jsx)("span",{children:"35"}),(0,t.jsx)("span",{children:"50"})]})]})]}),(0,t.jsxs)("div",{className:"search-input-wrapper",children:[(0,t.jsxs)("div",{className:"search-input-container",children:[(0,t.jsx)(d,{className:"input-icon"}),(0,t.jsx)("input",{type:"text",value:c,onChange:e=>{o(e.target.value),m(!0)},onFocus:()=>m(!0),placeholder:"സ്ഥലത്തിന്റെ പേര് തിരയുക...",className:"search-input",disabled:a}),(0,t.jsx)("button",{type:"submit",className:"search-button",disabled:a||!c.trim()&&!u,children:a?(0,t.jsx)("span",{className:"search-loading"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{className:"search-icon"}),(0,t.jsx)("span",{children:"സ്ഥലങ്ങൾ തിരയുക"})]})})]}),h&&c.trim()&&(0,t.jsx)("div",{className:"suggestions-container",children:N.filter(e=>e.toLowerCase().includes(c.toLowerCase())||c.toLowerCase().includes(e.toLowerCase())).slice(0,5).map((e,s)=>(0,t.jsxs)("div",{className:"suggestion-item",onClick:()=>f(e),children:[(0,t.jsx)(d,{className:"suggestion-icon"}),e]},s))})]}),(0,t.jsxs)("div",{className:"popular-locations",children:[(0,t.jsx)("span",{className:"popular-label",children:"പ്രശസ്തമായ സ്ഥലങ്ങൾ:"}),N.slice(0,5).map((e,s)=>(0,t.jsx)("button",{type:"button",className:"location-tag",onClick:()=>f(e),children:e},s))]})]})})}function I(e){let{message:s,onRetry:a,debugInfo:i,onSearch:l,isSearching:r,onDistrictSelect:n}=e;return(0,t.jsxs)("div",{className:"error-container",children:[(0,t.jsxs)("div",{className:"error-alert",children:[(0,t.jsx)(f,{className:"icon-small"}),(0,t.jsx)("h3",{className:"error-title",children:"സ്ഥാനം കണ്ടെത്താൻ കഴിഞ്ഞില്ല"}),(0,t.jsx)("p",{className:"error-message",children:s})]}),i&&(0,t.jsxs)("div",{className:"debug-info",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Debug Info:"})," ",i]}),(0,t.jsxs)("p",{className:"browser-info",children:[(0,t.jsx)("strong",{children:"Browser:"})," ",navigator.userAgent]})]}),(0,t.jsxs)("div",{className:"search-section",children:[(0,t.jsxs)("h4",{className:"search-title",children:[(0,t.jsx)(j,{className:"icon-small"}),"മറ്റൊരു സ്ഥലം തിരയുക"]}),(0,t.jsx)(C,{onSearch:l,isSearching:r,onDistrictSelect:n})]}),(0,t.jsxs)("div",{className:"retry-section",children:[(0,t.jsx)("button",{className:"retry-button",onClick:a,children:"വീണ്ടും ശ്രമിക്കുക"}),(0,t.jsxs)("div",{className:"help-section",children:[(0,t.jsx)("h4",{children:"ലൊക്കേഷൻ അനുമതി നൽകുന്നതിനുള്ള നിർദ്ദേശങ്ങൾ:"}),(0,t.jsxs)("ol",{children:[(0,t.jsx)("li",{children:"ബ്രൗസറിന്റെ അഡ്രസ് ബാറിൽ ലൊക്കേഷൻ ഐക്കൺ ക്ലിക്ക് ചെയ്യുക"}),(0,t.jsx)("li",{children:"ഈ വെബ്സൈറ്റിന് ലൊക്കേഷൻ അനുമതി നൽകുക"}),(0,t.jsx)("li",{children:'പേജ് റീലോഡ് ചെയ്യുക അല്ലെങ്കിൽ "വീണ്ടും ശ്രമിക്കുക" ബട്ടൺ ക്ലിക്ക് ചെയ്യുക'})]})]})]})]})}function E(e){let{debugInfo:s}=e;return(0,t.jsxs)("div",{className:"loading-container",children:[(0,t.jsx)(N,{className:"loading-spinner"}),(0,t.jsx)("h3",{className:"loading-title",children:"സമീപത്തുള്ള സ്ഥലങ്ങൾ തിരയുന്നു..."}),(0,t.jsx)("p",{className:"loading-message",children:"ദയവായി കാത്തിരിക്കുക, നിങ്ങളുടെ സ്ഥാനത്തിന് സമീപമുള്ള ടൂറിസ്റ്റ് കേന്ദ്രങ്ങൾ കണ്ടെത്തുന്നു."}),s&&(0,t.jsx)("div",{className:"debug-info",children:(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Status:"})," ",s]})})]})}function R(e){let{location:s,onClose:a}=e;return(0,t.jsxs)("div",{className:"directions-container",children:[(0,t.jsxs)("div",{className:"directions-header",children:[(0,t.jsxs)("button",{className:"back-button",onClick:a,children:[(0,t.jsx)(h,{className:"icon-small"}),"മടങ്ങുക"]}),(0,t.jsx)("h2",{children:"വഴി നിർദ്ദേശങ്ങൾ"})]}),(0,t.jsxs)("div",{className:"directions-destination",children:[(0,t.jsx)("h3",{children:s.name}),(0,t.jsxs)("p",{className:"destination-address",children:[(0,t.jsx)(d,{className:"icon-small"}),s.address]})]}),(0,t.jsx)("div",{className:"directions-info",children:(0,t.jsx)("p",{children:"ഈ സ്ഥലത്തേക്കുള്ള വഴി നിർദ്ദേശങ്ങൾ ലഭിക്കുന്നതിന് നിങ്ങളുടെ മൊബൈൽ ഫോണിലെ മാപ്പ് ആപ്ലിക്കേഷൻ ഉപയോഗിക്കുക. നിങ്ങളുടെ നിലവിലെ സ്ഥാനത്തിൽ നിന്ന് ഈ സ്ഥലത്തേക്ക് എത്തിച്ചേരാനുള്ള വഴി നിർദ്ദേശങ്ങൾ ലഭിക്കും."})}),(0,t.jsx)("div",{className:"directions-note",children:(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"കുറിപ്പ്:"})," ഈ ആപ്ലിക്കേഷൻ നിലവിൽ വഴി നിർദ്ദേശങ്ങൾ നേരിട്ട് കാണിക്കുന്നില്ല. കൃത്യമായ വഴി നിർദ്ദേശങ്ങൾക്ക് നിങ്ങളുടെ മൊബൈൽ ഫോണിലെ മാപ്പ് ആപ്ലിക്കേഷൻ ഉപയോഗിക്കുക."]})})]})}function L(){let[e,s]=(0,i.useState)([]),[a,l]=(0,i.useState)(!0),[r,n]=(0,i.useState)(null),[c,o]=(0,i.useState)(null),[x,j]=(0,i.useState)(null),[p,N]=(0,i.useState)(null),[f,v]=(0,i.useState)(!1),[k,$]=(0,i.useState)(null),[S,L]=(0,i.useState)(!1),[M,A]=(0,i.useState)(20),[q,P]=(0,i.useState)(!1),[F,U]=(0,i.useState)(null),[D,z]=(0,i.useState)(!1),[T,H]=(0,i.useState)(!0),[O,B]=(0,i.useState)(""),[G,W]=(0,i.useState)([]),K=(0,i.useRef)(!0),_=(0,i.useRef)(null),V=(0,i.useRef)({});(0,i.useEffect)(()=>()=>{K.current=!1,_.current&&_.current.disconnect()},[]),(0,i.useEffect)(()=>("undefined"!=typeof IntersectionObserver&&(_.current=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){let s=e.target.dataset.locationId;s&&(W(e=>[...e,s]),_.current.unobserve(e.target))}})},{rootMargin:"200px"})),()=>{_.current&&_.current.disconnect()}),[]),(0,i.useEffect)(()=>(_.current&&Object.values(V.current).forEach(e=>{e&&_.current.observe(e)}),()=>{_.current&&_.current.disconnect()}),[e]);let X=(0,i.useCallback)(()=>{if(l(!0),n(null),j("Attempting to get location..."),!navigator.geolocation){j("Geolocation is not supported by this browser"),n("നിങ്ങളുടെ ബ്രൗസർ ജിയോലൊക്കേഷൻ പിന്തുണയ്ക്കുന്നില്ല."),l(!1);return}navigator.geolocation.getCurrentPosition(async e=>{try{let{latitude:a,longitude:t}=e.coords;j(`Location obtained: ${a.toFixed(6)}, ${t.toFixed(6)}`),o({lat:a,lon:t}),j("Fetching locations from API..."),console.log("fetching locations from API...");let i=await fetch(`/api/tourist-locations?lat=${a}&lon=${t}&radius=${M}`);if(!i.ok)throw Error(`API responded with status: ${i.status}`);let r=await i.json();j(`Received ${r.length} locations from API`),K.current&&(s(r),l(!1),z(!0),W(r.slice(0,5).map(e=>e.id)))}catch(e){K.current&&(j(`Error: ${e.message}`),n("സ്ഥലങ്ങൾ ലഭിക്കുന്നതിൽ പിശക് ഉണ്ടായി"),l(!1))}},e=>{if(!K.current)return;let s="നിങ്ങളുടെ സ്ഥാനം കണ്ടെത്താൻ കഴിഞ്ഞില്ല. ദയവായി ലൊക്കേഷൻ അനുമതി നൽകുക.";switch(e.code){case 1:s="ലൊക്കേഷൻ അനുമതി നിഷേധിച്ചു. ദയവായി ബ്രൗസർ സെറ്റിംഗ്സിൽ പോയി ലൊക്കേഷൻ അനുമതി നൽകുക.";break;case 2:s="നിങ്ങളുടെ സ്ഥാനം ലഭ്യമല്ല. ദയവായി വീണ്ടും ശ്രമിക്കുക.";break;case 3:s="ലൊക്കേഷൻ ലഭിക്കുന്നതിന് കാലതാമസം നേരിട്ടു. ദയവായി വീണ്ടും ശ്രമിക്കുക."}j(`Geolocation error: ${e.code} - ${e.message}`),n(s),l(!1)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[M]),Z=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;if(e.trim()){v(!0),n(null),j(`Searching for: ${e} with radius: ${a}km`),A(a);try{let t=await fetch(`/api/geocode?query=${encodeURIComponent(e)}`);if(!t.ok)throw Error(`Geocoding API responded with status: ${t.status}`);let i=await t.json();if(!i||0===i.length){j("No location found for the search query"),s([]),N(null),v(!1);return}let{lat:l,lon:r,formatted:n}=i[0];if(!l||!r)throw Error("Geocoding API returned invalid coordinates");j(`Found location: ${n} at ${l}, ${r}`),N({lat:l,lon:r,name:n});let c=`/api/tourist-locations?lat=${l}&lon=${r}&radius=${a}`;j(`Fetching locations from: ${c}`);let o=await fetch(c);if(!o.ok){let e=await o.text();throw Error(`Tourist locations API error: ${o.status} - ${e}`)}let d=await o.json();j(`Received ${d.length} locations for search query`),K.current&&(s(d),z(!0),W(d.slice(0,5).map(e=>e.id)))}catch(e){console.error("Search error:",e),j(`Search error: ${e.message}`),n("തിരയലിൽ പിശക് ഉണ്ടായി. ദയവായി വീണ്ടും ശ്രമിക്കുക."),s([])}finally{v(!1)}}},J=e=>{if(!c){j("Cannot get directions: User location is not available");return}$(e),j(`Getting directions to: ${e.name}`),L(!0)},Q=e=>{U(e),P(!0)},Y=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;if(e){v(!0),n(null),j(`Searching in district: ${e.name} with radius: ${a}km`),A(a);try{let{lat:t,lon:i,name:l}=e;j(`Using coordinates: ${t}, ${i} for district: ${l}`),N({lat:t,lon:i,name:e.name});let r=`/api/tourist-locations?lat=${t}&lon=${i}&district=${e.englishName}&radius=${a}`;j(`Fetching locations from: ${r}`);let n=await fetch(r);if(!n.ok){let e=await n.text();throw Error(`Tourist locations API error: ${n.status} - ${e}`)}let c=await n.json();j(`Received ${c.length} locations for district: ${e.name}`),K.current&&(s(c),z(!0),W(c.slice(0,5).map(e=>e.id)))}catch(e){console.error("District search error:",e),j(`District search error: ${e.message}`),n("ജില്ലയിൽ തിരയുന്നതിൽ പിശക് ഉണ്ടായി. ദയവായി വീണ്ടും ശ്രമിക്കുക."),s([])}finally{v(!1)}}},ee=async(e,a,t)=>{j(`Updating locations with radius: ${t}km`);try{let i=await fetch(`/api/tourist-locations?lat=${e}&lon=${a}&radius=${t}`);if(!i.ok)throw Error(`API responded with status: ${i.status}`);let l=await i.json();j(`Received ${l.length} locations with ${t}km radius`),K.current&&(s(l),z(!0),W(l.slice(0,5).map(e=>e.id)))}catch(e){j(`Error updating locations: ${e.message}`),console.error("Error updating locations:",e)}},es=(a,t)=>{a&&s(e.map(e=>e.id===t?{...e,imageUrl:a}:e))},ea=e=>{B(e),H(!1)},et=(e,s)=>{s&&(V.current[e]=s)};return((0,i.useEffect)(()=>{X()},[X]),a)?(0,t.jsx)(E,{debugInfo:x}):r&&!p?(0,t.jsx)(I,{message:r,onRetry:X,debugInfo:x,onSearch:Z,isSearching:f,onDistrictSelect:Y}):(0,t.jsxs)("div",{className:"container",children:[S&&k?(0,t.jsx)(R,{location:k,onClose:()=>{L(!1),$(null)}}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"page-header",children:[(0,t.jsx)("h1",{children:"കേരളത്തിലെ ടൂറിസ്റ്റ് കേന്ദ്രങ്ങൾ"}),(0,t.jsx)("p",{className:"subtitle",children:p?`${p.name} സ്ഥലത്തിന് സമീപമുള്ള ആകർഷണീയമായ സ്ഥലങ്ങൾ`:"നിങ്ങളുടെ സ്ഥാനത്തിന് സമീപമുള്ള ആകർഷണീയമായ സ്ഥലങ്ങൾ കണ്ടെത്തുക"}),c&&!p&&(0,t.jsxs)("div",{className:"location-indicator",children:[(0,t.jsx)(d,{className:"icon-small"}),(0,t.jsx)("span",{children:"നിങ്ങളുടെ നിലവിലെ സ്ഥാനത്തിൽ നിന്നുള്ള ദൂരം കാണിക്കുന്നു"})]}),p&&(0,t.jsxs)("button",{className:"back-to-current-button",onClick:()=>{N(null),X()},children:[(0,t.jsx)(h,{className:"icon-small"}),"നിങ്ങളുടെ സ്ഥാനത്തിലേക്ക് മടങ്ങുക"]})]}),(0,t.jsx)(C,{onSearch:Z,isSearching:f,onDistrictSelect:Y,onRadiusChange:e=>{A(e),p?Z(p.name,e):c&&ee(c.lat,c.lon,e)},initialRadius:M}),x&&(0,t.jsxs)("div",{className:"debug-info",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Debug:"})," ",x]}),!D&&e.length>0&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Status:"})," Loading images..."]})]}),(0,t.jsxs)("div",{className:"main-content-with-sidebar",children:[(0,t.jsx)("div",{className:"main-content",children:0===e.length?(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)(m,{className:"icon-large"}),(0,t.jsx)("h3",{children:p?`${p.name} സ്ഥലത്തിന് സമീപം ടൂറിസ്റ്റ് കേന്ദ്രങ്ങളൊന്നും കണ്ടെത്തിയില്ല`:"സമീപത്തുള്ള ടൂറിസ്റ്റ് കേന്ദ്രങ്ങളൊന്നും കണ്ടെത്തിയില്ല"}),(0,t.jsx)("p",{children:p?"മറ്റൊരു സ്ഥലം തിരയുക അല്ലെങ്കിൽ നിങ്ങളുടെ സ്ഥാനത്തിലേക്ക് മടങ്ങുക.":"നിങ്ങളുടെ സ്ഥാനത്തിന് സമീപം ടൂറിസ്റ്റ് കേന്ദ്രങ്ങളൊന്നും കണ്ടെത്താൻ കഴിഞ്ഞില്ല. ദയവായി വീണ്ടും ശ്രമിക്കുക."}),!p&&(0,t.jsx)("button",{className:"retry-button",onClick:X,children:"വീണ്ടും ശ്രമിക്കുക"})]}):(0,t.jsx)("div",{className:`locations-grid ${D?"":"loading-images"}`,children:e.map(e=>(0,t.jsx)("div",{ref:s=>et(e.id,s),"data-location-id":e.id,className:"location-card-wrapper",children:G.includes(e.id)&&(0,t.jsx)(b,{location:e,onGetDirections:()=>J(e),showDirectionsButton:!!c,onViewMore:()=>Q(e),onImageSearch:()=>ea(e.name)})},e.id))})}),(0,t.jsxs)("div",{className:`sidebar ${T?"collapsed":""} sidebar-transition`,children:[(0,t.jsx)("button",{className:"toggle-sidebar-button",onClick:()=>{H(!T),T&&!O&&B("")},"aria-label":T?"Show image search":"Hide image search",children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{}),"ചിത്രങ്ങൾ തിരയുക"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{}),"ചിത്ര തിരയൽ മറയ്ക്കുക"]})}),!T&&(0,t.jsx)(w,{locationName:O,onImageSelect:s=>{let a=e.find(e=>e.name===O);a&&es(s,a.id)}})]})]})]}),q&&F&&(0,t.jsx)(y,{location:F,onClose:()=>P(!1),userLocation:c,onImageSelect:e=>{es(e,F.id)}})]})}a(8712),a(1493),a(3335),a(5698),a(2474)}},e=>{var s=s=>e(e.s=s);e.O(0,[775,441,684,358],()=>s(8220)),_N_E=e.O()}]);